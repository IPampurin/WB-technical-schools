## –§–∞–π–ª—ã –¥–ª—è UrlShortener ‚Äî —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π  

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞  

–ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –¥–∞–≤–Ω–æ —Å—Ç–∞–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ: –æ–Ω–∏ —É–¥–æ–±–Ω—ã –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö, —Ö–æ—Ä–æ—à–æ —Å–º–æ—Ç—Ä—è—Ç—Å—è –≤ –ø–µ—á–∞—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤. –ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∏, –±–ª–æ–≥–µ—Ä—ã, –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ URL, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å—Å—ã–ª–∫–∏ —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ –æ—Ç–∫—É–¥–∞ –ø–æ –Ω–∏–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç.

–í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.  
–û–Ω —É–º–µ–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∞–¥—Ä–µ—Å–∞ (–∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç–∞–∫ –∏ –ø–æ –∂–µ–ª–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è),  
–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ URL –∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞: –≤—Ä–µ–º—è,  
User-Agent, IP-–∞–¥—Ä–µ—Å, referer. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤  
Redis, –∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ JSON API, –Ω–æ –∏ –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.  

### üñ•Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏  

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã:  

  ‚Äì **POST /shorten** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç);  
  ‚Äì **GET /s/{short_url}** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º  
—Å–±–æ—Ä–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏);  
  ‚Äì **GET /analytics/{short_url}** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–µ: —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏  
–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º, –º–µ—Å—è—Ü–∞–º –∏ User-Agent;  
  ‚Äì **GET /links** ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫;  
  ‚Äì **GET /links/search/original?q=...** ‚Äî –ø–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫ –ø–æ —á–∞—Å—Ç–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL;  
  ‚Äì **GET /links/search/short?q=...** ‚Äî –ø–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫ –ø–æ —á–∞—Å—Ç–∏ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ URL.  

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:  
- –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ Redis —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–≥—Ä–µ–≤–æ–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ;  
- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö) –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º—ë–Ω;  
- –ø—Ä–æ—Å—Ç–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (HTML + JS) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫, –ø–æ–∏—Å–∫–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è curl.  

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞  

```bash
‚îú‚îÄ‚îÄ main.go                       
‚îú‚îÄ‚îÄ Dockerfile                    
‚îú‚îÄ‚îÄ compose.yml                   
‚îú‚îÄ‚îÄ .env                          # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ go.mod                        
‚îú‚îÄ‚îÄ go.sum                        
‚îú‚îÄ‚îÄ readme.md                     # —ç—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–æ–¥–µ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ cache/                    # —Ä–∞–±–æ—Ç–∞ —Å Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≥—Ä–µ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ configuration/            # –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ db/                       # –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å PostgreSQL (–º–æ–¥–µ–ª–∏, –∑–∞–ø—Ä–æ—Å—ã, –º–∏–≥—Ä–∞—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ server/                   # –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞, middleware, graceful shutdown
‚îÇ   ‚îî‚îÄ‚îÄ service/                  # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ –∫—ç—à–µ–º
‚îî‚îÄ‚îÄ web/                          # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (index.html)
```

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç  

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**  

- Docker  
- –°–≤–æ–±–æ–¥–Ω—ã–µ –ø–æ—Ä—Ç—ã: 8081 (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å), 5432 (PostgreSQL), 6379 (Redis)  

**Docker-–æ–±—Ä–∞–∑—ã**  

- postgres:16  
- redis:7  

**–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**  

    cd ./ && docker compose up  


- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8081  

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è  

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

    ## –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ api
    SERVICE_HOST_NAME=0.0.0.0         # –∏–º—è —Å–ª—É–∂–±—ã (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –≤ –¥–æ–∫–µ—Ä–µ
    SERVICE_PORT=8081                 # –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–∏—Å
    GIN_MODE=debug                    # –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –ª–æ–≥–æ–≤ (debug / release)

    ## –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    DB_HOST_NAME=dbPostgres           # –∏–º—è —Å–ª—É–∂–±—ã (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –≤ –¥–æ–∫–µ—Ä–µ
    DB_PORT=5432                      # –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å–∏–¥–∏—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    DB_NAME=db-postgres               # –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    DB_PASSWORD=postgres              # –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    DB_USER=postgres                  # –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    ## –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫—ç—à–∞
    REDIS_HOST_NAME=dbRedis           # –∏–º—è —Å–ª—É–∂–±—ã (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –≤ —Å–µ—Ç–∏ –¥–æ–∫–µ—Ä–∞
    REDIS_PORT=6379                   # –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å–∏–¥–∏—Ç Redis
    REDIS_PASSWORD=                   # –ø–∞—Ä–æ–ª—å –æ—Ç –ë–î Redis
    REDIS_DB=0                        # –Ω–æ–º–µ—Ä –ë–î Redis
    REDIS_TTL=600s                    # –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∫—ç—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 600s)
    REDIS_WARMING=24h                 # –ø–µ—Ä–∏–æ–¥, –∑–∞ –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞