## Данный репозиторий содержит файлы тестового задания уровня L0  

<p align="center">
    <img src="/WB-technical-schools/L0/service/GopherDoctor.png" alt="Гофер" width="200" height="200">
</p>

### В целом проект представляет собой масштабируемое веб-приложение с интеграцией Apache Kafka и использованием базы данных PostgreSQL. Может служить примером комплексной системы для централизованного управления данными о заказах.  
### Функционал: веб-интерфейс для CRUD операций с данными заказа, сервер Kafka, продюсер, консумер для вычитывания сообщений и направления данных на валидацию и внесение в базу.  

### Структура проекта  
    kafka - Docker compose файл для старта брокера сообщений.  
    producer - файлы для запуска продюсера для направления сообщений брокеру сообщений.  
    service - файлы веб-интерфейса, сервера и консумера.  
  
### Запуск  
Запуск рекомендуется выполнять с использованием Docker desktop.  
При запуске используются следующие образы: confluentinc/cp-zookeeper v.7.9.0, confluentinc/cp-kafka v.7.9.0, postgres:latest.  
    - Убедитесь в том, что порт 9092 хоста не занят и из директории /kafka запустите брокер сообщений командой "docker compose up". Дождитесь полного запуска.  
    - Из директории /producer запустите командой "docker compose up" продюсер. Продюсер направит несколько тестовых сообщений в брокер и контейнер, имитирующий поступление сообщений остановится. Предусмотрено автосоздание топика "my-topic-L0" для приёма сообщений в брокере.  
    - Убедитесь в том, что порт 8081 хоста не занят и из директории /service запустите командой "docker compose up" само веб-приложение.  
Если запуск прошёл успешно, по адресу http://localhost:8081 объявится интуитивно понятный интерфейс для работы с данными заказов.  

Обратите внимание, что для некоторого удобства предусмотрена возможность использовать следующие переменные окружения в файле /service/.env:  
    - имя пользователя базы данных: DBL0_USER=postgres  
    - пароль от базы данных: DBL0_PASSWORD=postgres
    - имя базы данных: DBL0_NAME=level-zero-db
    - порт базы данных: DBL0_PORT=5432
    - порт хоста для работы веб-приложения L0_PORT=8081.  

### Тесты  
Вы можете провести тесты работы сервера и базы данных командой "go test" в директории /service/tests/.  